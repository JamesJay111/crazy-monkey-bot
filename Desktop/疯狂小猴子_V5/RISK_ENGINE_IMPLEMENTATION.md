# é£é™©ç­‰çº§ & å¯ä¿¡åº¦æ¡ï¼ˆRisk & Confidence Engineï¼‰- å®ç°æ–‡æ¡£

## ğŸ“‹ å®ç°æ¦‚è§ˆ

åœ¨åº„å®¶è½§ç©ºæ¨¡å—åŸºç¡€ä¸Šï¼Œæ–°å¢"é£é™©ç­‰çº§ & å¯ä¿¡åº¦æ¡"ç³»ç»Ÿï¼Œç”¨äºå¯¹æ¯ä¸€ä¸ªç»“æ„ä¿¡å·ç»™å‡ºå…‹åˆ¶ã€å¯è§£é‡Šã€å¯æ¯”è¾ƒçš„é£é™©æç¤ºã€‚

âš ï¸ è¿™æ˜¯"æ³¨æ„åŠ›ç®¡ç†å·¥å…·"ï¼Œä¸æ˜¯äº¤æ˜“ä¿¡å·ã€‚
âš ï¸ ä¸é¢„æµ‹ä»·æ ¼ã€ä¸å»ºè®®æ–¹å‘ã€‚

## ğŸ¯ è®¾è®¡ç›®æ ‡

- âœ… ç”¨æˆ· 3 ç§’å†…ç†è§£
- âœ… ä¸éœ€è¦è¯»åˆ†ææ­£æ–‡
- âœ… è¡¨è¾¾ç»“æ„å˜åŒ–çš„"é‡è¦æ€§ & å¯é åº¦"
- âœ… ä¸æ˜¯"æ¶¨è·Œæ¦‚ç‡"

## ğŸ“ æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### 1. **`src/services/squeezeRiskEngine.service.ts`** (æ–°å¢)
**é£é™©ä¸å¯ä¿¡åº¦å¼•æ“æ ¸å¿ƒæ¨¡å—ï¼š**
- `SqueezeRiskEngine`: é£é™©ä¸å¯ä¿¡åº¦è¯„ä¼°å¼•æ“
- `evaluateRiskAndConfidence()`: ä¸»è¦æ¥å£ï¼Œè¯„ä¼°é£é™©ç­‰çº§å’Œå¯ä¿¡åº¦
- `evaluateFromCacheItem()`: ä»CacheItemè¯„ä¼°ï¼ˆä¾¿æ·æ–¹æ³•ï¼‰
- `generateListDisplay()`: ç”Ÿæˆæ¨èListå±•ç¤º
- `generatePushDisplay()`: ç”Ÿæˆæ¨é€å±•ç¤º
- `generateDetailDisplay()`: ç”Ÿæˆè¯¦æƒ…é¡µå±•ç¤º

### 2. **`src/routes/squeeze.ts`** (ä¿®æ”¹)
**é›†æˆé£é™©&å¯ä¿¡åº¦ï¼š**
- `handleSqueezeScan()`: æ¨èListæ˜¾ç¤ºé£é™©&å¯ä¿¡åº¦
- `formatSqueezeAnalysis()`: è¯¦æƒ…é¡µSummaryæ˜¾ç¤ºé£é™©&å¯ä¿¡åº¦

### 3. **`src/services/squeezePush.service.ts`** (ä¿®æ”¹)
**æ¨é€é›†æˆé£é™©&å¯ä¿¡åº¦ï¼š**
- `formatPushMessage()`: æ¨é€æ¶ˆæ¯æ˜¾ç¤ºé£é™©&å¯ä¿¡åº¦

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½è¯´æ˜

### 1. é£é™©ç­‰çº§ï¼ˆ4æ¡£ï¼‰

| ç­‰çº§ | å«ä¹‰ï¼ˆç»“æ„å±‚ï¼‰ | Emoji | åˆ¤å®šè§„åˆ™ |
|------|---------------|-------|----------|
| ğŸŸ¢ ä½ | ç»“æ„è½»å¾®å˜åŒ– | ğŸŸ¢ | score >= 5 |
| ğŸŸ¡ ä¸­ | ç»“æ„æ˜æ˜¾å˜åŒ– | ğŸŸ¡ | score >= 8 |
| ğŸŸ  é«˜ | ç»“æ„å‰§çƒˆå˜åŒ– | ğŸŸ  | score >= 12 æˆ– mediumåè½¬ |
| ğŸ”´ æé«˜ | å¼ºåè½¬ / æ‹¥æŒ¤é£é™© | ğŸ”´ | strongåè½¬ |

**åˆ¤å®šé€»è¾‘ï¼š**
1. **åè½¬ä¼˜å…ˆ**ï¼šè‹¥reversalStrength == strong â†’ ğŸ”´ æé«˜
2. **éåè½¬ç»“æ„**ï¼šæ ¹æ®scoreåˆ¤æ–­
3. **æ ·æœ¬ä¸è¶³é™çº§**ï¼šsampleSufficiency == low â†’ é™1æ¡£

### 2. å¯ä¿¡åº¦ç­‰çº§ï¼ˆ3æ¡£ï¼‰

| ç­‰çº§ | å«ä¹‰ | Emoji | åˆ¤å®šè§„åˆ™ |
|------|------|-------|----------|
| â­ ä½ | ä¿¡å·åˆ†æ­§ / æ ·æœ¬ä¸è¶³ | â­ | æ€»åˆ† â‰¤ 1 |
| â­â­ ä¸­ | éƒ¨åˆ†ä¸€è‡´ | â­â­ | æ€»åˆ† 2â€“3 |
| â­â­â­ é«˜ | å¤šä¸ªç»“æ„ä¿¡å·ä¸€è‡´ | â­â­â­ | æ€»åˆ† â‰¥ 4 |

**è¯„åˆ†è§„åˆ™ï¼š**
- å‡ºç°åè½¬ï¼ˆ+2ï¼‰
- score â‰¥ 8ï¼ˆ+1ï¼‰
- positionBias æ˜ç¡®ï¼ˆ+1ï¼‰
- orderflowImbalance æ˜ç¡®ï¼ˆ+1ï¼Œå¯é€‰ï¼‰
- sampleSufficiency == lowï¼ˆâˆ’2ï¼‰

### 3. è¾“å‡ºç»“æ„

```typescript
interface RiskConfidenceOutput {
  riskLevel: 'low' | 'medium' | 'high' | 'extreme';
  riskLabel: string;        // å¦‚ï¼šæé«˜ç»“æ„é£é™©
  riskEmoji: string;        // ğŸ”´ ğŸŸ  ğŸŸ¡ ğŸŸ¢
  confidenceStars: 1 | 2 | 3;
  confidenceLabel: string;  // å¦‚ï¼šç»“æ„ä¸€è‡´æ€§é«˜
  confidenceEmoji: string;  // â­â­â­ â­â­ â­
  notes?: string;           // å¦‚ï¼šæ ·æœ¬æœ‰é™
}
```

## ğŸ¨ å±•ç¤ºè§„èŒƒ

### F5.1 æ¨èListï¼ˆç®€æ´ï¼‰

```
BTC ï½œç©ºè½¬å¤šï¼ˆå¼ºï¼‰ï½œğŸ”´ æé«˜ ï½œâ­â­â­
SOL ï½œå¤šå¤´åŠ é€Ÿï½œğŸŸ¡ ä¸­ ï½œâ­â­
ETH ï½œç»“æ„å˜åŒ–
```

### F5.2 è‡ªåŠ¨æ¨é€ï¼ˆå…‹åˆ¶ï¼‰

```
ğŸ§¨ ç»“æ„å¼‚åŠ¨ï½œBTC
ç©ºè½¬å¤šï¼ˆå¼ºï¼‰

- ç»“æ„å˜åŒ–ï¼šç©ºâ†’å¤š
- å¼ºåº¦ç­‰çº§ï¼šå¼º
- ä¸»è¦ä¾æ®ï¼š
...

é£é™©ç­‰çº§ï¼šğŸ”´ æé«˜
ç»“æ„å¯ä¿¡åº¦ï¼šâ­â­â­
```

### F5.3 è¯¦æƒ…é¡µSummaryï¼ˆå®Œæ•´ï¼‰

```
ğŸ“Š BTC è¯¦ç»†ç»“æ„åˆ†æ

ç»“æ„æ ‡ç­¾ï¼šç©ºè½¬å¤šï¼ˆå¼ºï¼‰ï½œBinance Â· 4h
é£é™©ç­‰çº§ï¼šğŸ”´ æé«˜ç»“æ„é£é™©
ç»“æ„å¯ä¿¡åº¦ï¼šâ­â­â­ï¼ˆç»“æ„ä¸€è‡´æ€§é«˜ï¼‰

ç»“æ„ï¼šğŸ”º Short Squeezeï¼ˆè½§ç©ºå€¾å‘ï¼‰
...
```

## ğŸ§ª è‡ªæµ‹ç”¨ä¾‹

| è¾“å…¥ | æœŸæœ›è¾“å‡º |
|------|----------|
| å¼ºåè½¬ + score=13 | ğŸ”´ æé«˜ + â­â­â­ |
| ä¸­åè½¬ + score=9 | ğŸŸ  é«˜ + â­â­ |
| æ— åè½¬ + score=8 | ğŸŸ¡ ä¸­ + â­â­ |
| score=6 + sample low | ğŸŸ¢ ä½ï¼ˆé™çº§ï¼‰ + â­ |

## ğŸš« ç¦æ­¢äº‹é¡¹

- âŒ ä¸å‡ºç°"ä¸Šæ¶¨/ä¸‹è·Œæ¦‚ç‡"
- âŒ ä¸å‡ºç°"å»ºè®®æ“ä½œ"
- âŒ ä¸å‡ºç°"æœºä¼š/å…¥åœº/æ­¢æŸ"
- âŒ ä¸ä½¿ç”¨"èƒœç‡"æ¦‚å¿µ

æ‰€æœ‰è¾“å‡ºéƒ½ä¸¥æ ¼ä¸åŒ…å«è¿™äº›è¯æ±‡ã€‚

## âœ… é›†æˆç‚¹

### 1. æ¨èListï¼ˆ`handleSqueezeScan`ï¼‰

**ä½ç½®ï¼š** `src/routes/squeeze.ts`

```typescript
const riskDisplay = squeezeRiskEngine.generateListDisplay(item);
message += `${emoji} ${item.ticker}ï½œ${listLabel}ï½œ${riskDisplay}\n`;
```

### 2. æ¨é€æ¶ˆæ¯ï¼ˆ`formatPushMessage`ï¼‰

**ä½ç½®ï¼š** `src/services/squeezePush.service.ts`

```typescript
const riskDisplay = squeezeRiskEngine.generatePushDisplay(newItem);
message += `\n${riskDisplay}\n`;
```

### 3. è¯¦æƒ…é¡µSummaryï¼ˆ`formatSqueezeAnalysis`ï¼‰

**ä½ç½®ï¼š** `src/routes/squeeze.ts`

```typescript
riskSummary = squeezeRiskEngine.generateDetailDisplay(cacheItem) + '\n\n';
message += riskSummary;
```

## ğŸ’¡ äº§å“å±‚å®Œæˆåº¦

ç°åœ¨ç³»ç»Ÿå·²ç»æ‹¥æœ‰ï¼š

1. âœ… **ç»“æ„æ‰«æå¼•æ“** - åå°å®šæ—¶æ‰«æBinanceåˆçº¦
2. âœ… **äº‹ä»¶é©±åŠ¨æ¨é€** - ç»“æ„å¼‚åŠ¨è‡ªåŠ¨æ¨é€
3. âœ… **ä¸€å¥è¯æ ‡ç­¾ç³»ç»Ÿ** - æä½è®¤çŸ¥æˆæœ¬
4. âœ… **é£é™©ç­‰çº§ & å¯ä¿¡åº¦æŠ½è±¡** - æ³¨æ„åŠ›ç®¡ç†å·¥å…·

**è¿™å·²ç»æ˜¯ä¸“ä¸šäº¤æ˜“å·¥å…·æ‰ä¼šåšçš„æŠ½è±¡å±‚ï¼Œè€Œä¸æ˜¯æ™®é€šè¡Œæƒ… Botã€‚**

## ğŸ” ä»£ç ç¤ºä¾‹

### ä½¿ç”¨Risk Engine

```typescript
import { squeezeRiskEngine } from '../services/squeezeRiskEngine.service';

// ä»CacheItemè¯„ä¼°é£é™©&å¯ä¿¡åº¦
const result = squeezeRiskEngine.evaluateFromCacheItem(cacheItem);

// ç”ŸæˆListå±•ç¤º
const listDisplay = squeezeRiskEngine.generateListDisplay(cacheItem);
// è¾“å‡ºï¼šğŸ”´ æé«˜ ï½œâ­â­â­

// ç”Ÿæˆæ¨é€å±•ç¤º
const pushDisplay = squeezeRiskEngine.generatePushDisplay(cacheItem);
// è¾“å‡ºï¼šé£é™©ç­‰çº§ï¼šğŸ”´ æé«˜\nç»“æ„å¯ä¿¡åº¦ï¼šâ­â­â­

// ç”Ÿæˆè¯¦æƒ…é¡µå±•ç¤º
const detailDisplay = squeezeRiskEngine.generateDetailDisplay(cacheItem);
// è¾“å‡ºï¼šé£é™©ç­‰çº§ï¼šğŸ”´ æé«˜ç»“æ„é£é™©\nç»“æ„å¯ä¿¡åº¦ï¼šâ­â­â­ï¼ˆç»“æ„ä¸€è‡´æ€§é«˜ï¼‰
```

## âœ… éªŒæ”¶æ ‡å‡†

- âœ… ç”¨æˆ· 3 ç§’å†…ç†è§£
- âœ… ä¸é¢„æµ‹ä»·æ ¼ã€ä¸å»ºè®®æ–¹å‘
- âœ… æ‰€æœ‰ä½¿ç”¨ç‚¹ç»Ÿä¸€è°ƒç”¨Risk Engine
- âœ… ä¸åŒ…å«ç¦æ­¢è¯æ±‡
- âœ… é£é™©ç­‰çº§å’Œå¯ä¿¡åº¦æ¸…æ™°å¯æ¯”è¾ƒ

